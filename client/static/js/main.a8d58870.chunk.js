(this["webpackJsonpsouth-park-taxi-client"]=this["webpackJsonpsouth-park-taxi-client"]||[]).push([[0],{137:function(e,a,t){e.exports={content:"Standard_content__2Irth common_content__PBI5B"}},141:function(e,a,t){e.exports={content:"StandardMini_content__3AEGH common_content__PBI5B"}},142:function(e,a,t){e.exports={iframe:"Tracker_iframe__Zipq7"}},145:function(e,a,t){e.exports=t(295)},152:function(e,a,t){},295:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(6),l=t.n(o),c=t(20),s=t(11),i=t(22),m=t(28),u=t(12),p=t(57),d=t(46),E=t(41);const g=Object(d.b)({uri:"/api"}),h=new u.a((e,a)=>{const t=localStorage.getItem("token");return t&&e.setContext({headers:{authorization:t}}),a(e)}),_=Object(p.a)(({response:e,operation:a,graphQLErrors:t,networkError:n})=>{console.log("response> ",e),console.log("operation> ",a)});var b=new m.a({cache:new E.a,link:u.a.from([_,h,g])});t(152);var w=()=>r.a.createElement("div",null,"Home"),k=t(301),y=t(297),v=t(304),f=t(298),S=t(303),I=t(100),P=t(89),x=t(90);x.a`
  mutation addUser($name: String!, $password: String!, $email: String!) {
    addUser(name: $name, password: $password, email: $email) {
      id
      name
    }
  }
`;const M=x.a`
  mutation loginUser($password: String!, $email: String!) {
    loginUser(password: $password, email: $email)
  }
`;var C=t(91),j=t.n(C);const N=e=>({required:!0,message:`Please input ${e}!`}),O={labelCol:{span:24},wrapperCol:{span:24}},T={wrapperCol:{offset:6,span:16}};var L=()=>{const e=Object(s.g)(),[a]=k.a.useForm(),[t,{data:o={},loading:l,error:c,called:i,...m}]=Object(P.a)(M);Object(n.useEffect)(()=>{const{loginUser:a}=o;a&&(localStorage.setItem("token",a),e.push("/"))},[o,c,i,m,e]);return r.a.createElement(y.a,{tip:"Loading",spinning:l},i&&c&&r.a.createElement("div",{className:j.a.error},r.a.createElement(v.a,{message:"Error",description:c.message,type:"error",closable:!0})),r.a.createElement(k.a,Object.assign({},O,{form:a,className:j.a.container,onFinish:async e=>{await t({variables:e})}}),r.a.createElement(f.a,null,"South Park Taxi Login Page"),r.a.createElement(k.a.Item,{name:"email",label:"E-mail",rules:[{required:!0,type:"email",message:"Please input E-mail!"}]},r.a.createElement(S.a,null)),r.a.createElement(k.a.Item,{name:"password",label:"Password",rules:[N("Password")]},r.a.createElement(S.a.Password,null)),r.a.createElement(k.a.Item,T,r.a.createElement(I.a,{type:"primary",htmlType:"submit"},"Login"))))};var $=()=>r.a.createElement("div",null,"Page404"),U=t(299),B=t(96),F=t.n(B);const{Content:q}=U.a;var H=({children:e})=>r.a.createElement(U.a,{className:F.a.layout},r.a.createElement(q,{className:F.a.content},e)),W=t(137),Z=t.n(W),z=t(61),A=t.n(z),J=t(36),K=t(302),R=t(99),X=t.n(R),Y=t(305),D=t(306),G=t(307),Q=t(308),V=t(300);const ee=()=>r.a.createElement("svg",{t:"1591011788317",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3319",width:"16",height:"16",fill:"currentColor"},r.a.createElement("path",{d:"M487.521492 903.497509c23.521716 70.714552 68.140936 73.205279 99.616812 5.8001l357.823572-766.784824c31.475875-67.544349 2.294252-96.664573-65.175395-65.184605L113.048729 435.139471c-67.467601 31.478945-64.907289 76.102259 5.727445 99.694583l276.54236 92.152816L487.521492 903.497509z","p-id":"3320"})),ae=e=>r.a.createElement(V.a,Object.assign({component:ee},e)),te=[{key:"home",linkTo:"/",icon:r.a.createElement(Y.a,null),name:"Home"},{key:"tracker",linkTo:"/tracker",icon:r.a.createElement(ae,null),name:"Tracker"},{key:"users",icon:r.a.createElement(D.a,null),role:"ADMIN",name:"Users",subMenu:[{key:"addNewUser",linkTo:"/add-new-user",name:"Add new user",icon:r.a.createElement(G.a,null)},{key:"usersList",linkTo:"/users-list",name:"Users List",icon:r.a.createElement(Q.a,null)}]}],{Sider:ne}=U.a,{Item:re,SubMenu:oe}=K.a;var le=()=>{const{pathname:e=""}=Object(s.h)(),a=Object(n.useMemo)(()=>te[0]||{},[]),t=Object(n.useMemo)(()=>{const t=n=>{if(e===a.linkTo)return a.key;for(let a=0;a<n.length;a++){if("/"!==n[a].linkTo&&e.startsWith(n[a].linkTo))return n[a].key;if(n[a].subMenu){let e=t(n[a].subMenu);if(e)return e}}};return t(te)},[a,e]),o=e=>e.subMenu?r.a.createElement(oe,{key:e.key,title:e.name,icon:e.icon},e.subMenu.map(o)):r.a.createElement(re,{key:e.key,icon:e.icon},r.a.createElement(J.a,{to:e.linkTo},e.name));return r.a.createElement(ne,{className:X.a.sidebar},r.a.createElement("div",{className:X.a.logo}),r.a.createElement(K.a,{theme:"dark",mode:"inline",selectedKeys:t},te.map(o)))};const{Header:ce,Footer:se}=U.a;var ie=({children:e})=>{const{push:a}=Object(s.g)();return r.a.createElement(U.a,{className:A.a.layout},r.a.createElement(le,null),r.a.createElement(U.a,{className:A.a.container},r.a.createElement(ce,{className:A.a.header},r.a.createElement(I.a,{type:"link",onClick:()=>{localStorage.removeItem("token"),a("/signIn")}},"Logout")),e,r.a.createElement(se,{className:A.a.footer},"SouthPark \xa92020 Created by Yevhenii Osadchyi")))};const{Content:me}=U.a;var ue=({children:e})=>r.a.createElement(ie,null,r.a.createElement(me,{className:Z.a.content},e)),pe=t(141),de=t.n(pe);const{Content:Ee}=U.a;var ge=({children:e})=>r.a.createElement(ie,null,r.a.createElement(Ee,{className:de.a.content},e));var he=({children:e,...a})=>{const t=localStorage.getItem("token");return r.a.createElement(s.b,Object.assign({},a,{render:({location:a})=>t?e:r.a.createElement(s.a,{to:{pathname:"/signIn",state:{from:a}}})}))};var _e=e=>{const{layout:a,component:t,notPrivate:n=!1,...o}=e,l=n?s.b:he;return r.a.createElement(l,o,r.a.createElement(a,null,r.a.createElement(t,null)))},be=t(142),we=t.n(be);var ke=()=>r.a.createElement("iframe",{title:"Wialon",src:"https://hosting.wialon.com/?lang=ru",className:we.a.iframe,frameBorder:"0"});const ye={labelCol:{span:24},wrapperCol:{span:24}},ve={wrapperCol:{offset:6,span:16}};var fe=({onSave:e})=>{const[a]=k.a.useForm();return r.a.createElement(k.a,Object.assign({},ye,{form:a,onFinish:e}),r.a.createElement(f.a,null,"South Park Taxi"),r.a.createElement(k.a.Item,{name:"name",label:"Client name",rules:[N("Client name")]},r.a.createElement(S.a,null)),r.a.createElement(k.a.Item,{name:"password",label:"Password",rules:[N("Password")]},r.a.createElement(S.a.Password,null)),r.a.createElement(k.a.Item,{name:"email",label:"E-mail",rules:[{...N("E-mail"),type:"email"}]},r.a.createElement(S.a,null)),r.a.createElement(k.a.Item,ve,r.a.createElement(I.a,{type:"primary",htmlType:"submit"},"Submit"),r.a.createElement(I.a,{htmlType:"button",onClick:()=>{a.resetFields()}},"Reset")))};var Se=()=>r.a.createElement("div",null,r.a.createElement(fe,null));var Ie=()=>r.a.createElement("div",null,"UsersList");function Pe(){return r.a.createElement(s.d,null,r.a.createElement(_e,{exact:!0,layout:ue,component:w,path:"/"}),r.a.createElement(_e,{exact:!0,layout:ge,component:ke,path:"/tracker"}),r.a.createElement(_e,{exact:!0,layout:ue,component:Se,path:"/add-new-user"}),r.a.createElement(_e,{exact:!0,layout:ue,component:Ie,path:"/users-list"}),r.a.createElement(_e,{exact:!0,layout:H,component:L,path:"/signIn",notPrivate:!0}),r.a.createElement(_e,{exact:!0,layout:H,component:$,path:"/page-not-found",notPrivate:!0}),r.a.createElement(s.a,{to:"/page-not-found"}))}const xe=Object(i.a)();var Me=function(){return r.a.createElement(c.a,{client:b},r.a.createElement(s.c,{history:xe},r.a.createElement(Pe,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})},61:function(e,a,t){e.exports={logo:"Main_logo__1zjnP",layout:"Main_layout__JoLvc",container:"Main_container__3oZZn",header:"Main_header__pNbYw",footer:"Main_footer__1MrCL"}},91:function(e,a,t){e.exports={container:"SignIn_container__KjPyU",error:"SignIn_error__-dqew"}},96:function(e,a,t){e.exports={layout:"Minimal_layout__3MwPt",content:"Minimal_content__RPtXf"}},99:function(e,a,t){e.exports={sidebar:"Sidebar_sidebar__3qUkX",logo:"Sidebar_logo__19OZ3"}}},[[145,1,2]]]);
//# sourceMappingURL=main.a8d58870.chunk.js.map